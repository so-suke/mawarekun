{"version":3,"sources":["cssModules/App.module.css","constants/index.tsx","utils/index.tsx","styledComponents/ShrinkNameButton.tsx","components/ContinueStartButton.tsx","components/ResetStartButton.tsx","components/NumberButtons.tsx","components/Rotations.tsx","components/StoreNames.tsx","App.tsx","index.tsx"],"names":["module","exports","STORE_NAMES","STORE_NAMES_EXCHANGE_RATES_MAP","Map","STORE_NAME_BALL_NUMBER_LENT","ROTATION_MODE","ERROR_MSG","last","array","length","sleep","ms","Promise","resolve","setTimeout","ShrinkNameButton","styled","Button","ContinueStartButton","props","variant","className","onClick","rotationNumberInputed","setIsCorrectBallNumberConfirm","setRotations","rotations","concat","type","rotationNumber","Number","rotationRateMostRecent","rotationRate","clearRotationNumberInputed","error","alert","continueStart","ResetStartButton","id","isResetStarted","selectStoreRef","current","value","localStorage","setItem","format","Date","resetStart","NumberButtons","map","number","setRotationNumberInputed","Rotations","rotation","index","content","ListGroup","Item","StoreNames","$doms","disabled","hidden","$storeNames","storeNames","store","$domsConcated","axios","require","default","App","useState","pageIndex","setPageIndex","setRotationRate","investmentCnt","setInvestmentCnt","rotationNumberTotal","setRotationNumberTotal","border","setBorder","storeName","setStoreName","machineName","setMachineName","ballNumberConfirm","setBallNumberConfirm","ballNumberAutoRotation","setBallNumberAutoRotation","rotationNumberAutoRotation","setRotationNumberAutoRotation","remarks","setRemarks","exchangeRate","setExchangeRate","isCorrectBallNumberConfirm","rotationListRef","useRef","document","createElement","rotationButtonRef","setItemLocalStorage","useCallback","keyName","setted","getItemLocalStorage","init","getItem","useEffect","investmentCntLocal","rotationsParsed","JSON","parse","storeNameLocal","machineNameLocal","ballNumberConfirmLocal","borderLocal","remarksLocal","calcRotationRate","totalRotationNumberCalculatted","forEach","idx","calcRotationNumberTotal","scrollTop","scrollHeight","stringify","storeExchangeRate","get","String","rotationUnitPrice","useMemo","toFixed","getWorkAmount","getBallNumberLent","hasOwnProperty","Error","deleteAllRotation","window","confirm","a","clickRotation","then","click","diffBallNumber","countInvestment","diffRotationNumber","rotationNumberPerInvestment","Math","floor","isInteger","investmentCntNow","rotationNumberInputedClone","rotationNumberLast","before","numberBeMovedUpIfNeed","slice","beCompared","isMoveUp","createBefore","after","getRotationNumberShortInputed","rotationNumberDiffFromLast","exchangeRateRatio","rotationNumberTotalNow","rotationRateNow","Container","styles","bg_warning","Row","Col","data-testid","rotationsLength","rotationsDeleted","filter","rotationNumberDiffShouldSub","deleteOneRotation","FormControl","onChange","event","target","placeholder","ref","InputGroup","size","Prepend","Text","Append","autoRotation","Form","Control","as","rows","remarksInputed","now","date","timeStart","timeEnd","params","URLSearchParams","append","post","response","catch","writeWorkResultAndDeleteAllRotation","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.a60fa9d1.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"bg_warning\":\"App_bg_warning__2uihL\"};","import { TypeErrorMsg } from \"../types\";\n\n// 店名に関するもの\nexport const STORE_NAMES = [\"DoruNakano\", \"LiNakano\", \"NtNakano\"];\nexport const STORE_NAMES_EXCHANGE_RATES_MAP = new Map([\n  [STORE_NAMES[0], 4.38],\n  [STORE_NAMES[1], 4],\n  [STORE_NAMES[2], 4],\n]);\nexport const STORE_NAME_BALL_NUMBER_LENT = {\n  [STORE_NAMES[0]]: 114,\n  [STORE_NAMES[1]]: 125,\n  [STORE_NAMES[2]]: 125,\n};\n// 選択肢：店名の初期タイトル\nexport const SELECT_STORE_TITLE: string = \"店名を選択して下さい。\";\n// 通常の交換率\nexport const EXCHANGE_RATE_NORMAL: number = 4;\n// ワンプッシュ辺りの金額\nexport const AMOUNT_ONE_PUSH = 500;\n// スプレッドシートREST_URL\nexport const REST_URL_SPREADSHEET = \"https://script.google.com/macros/s/AKfycbwAEFQ6VWnrJ67EjQiYd8WeEv0D2ogBpV2GYDgxucx9C5gf1Dmd/exec\";\nexport const REPLENISHMENT_AMOUNT = 500;\n// 直近の回転率計算に用いる。\nexport const REPLENISHMENT_AMOUNT_RATIO = 1000 / REPLENISHMENT_AMOUNT;\n\nexport const ROTATION_MODE: { [key: string]: string } = {\n  normal: \"normal\",\n  continueStart: \"continueStart\",\n  resetStart: \"resetStart\",\n};\n\n// エラーメッセージ\nexport const ERROR_MSG: TypeErrorMsg = {\n  resetStart: \"リセットスタートをしましょう\",\n  resetStartedAlready: \"既にリセットスタートされています\",\n  rotaionNumberEmpty: \"回転数を入力しましょう\",\n  selectStore: \"店名を選択して下さい。\",\n  notExpectedStoreName: \"エラー可能性。存在しない店名が渡されました。\",\n};\n","export const last = (array: any[]) => {\n  return array[array.length - 1];\n};\n\nexport const sleep = (ms: number) => {\n  return new Promise((resolve) => setTimeout(resolve, ms));\n};\n","import { Button } from \"react-bootstrap\";\nimport styled from \"styled-components\";\n\nexport const ShrinkNameButton = styled(Button)`\n  font-size: 0.4rem;\n`;\n","import React from \"react\";\nimport { ShrinkNameButton } from \"../styledComponents/ShrinkNameButton\";\nimport { TypeRotation } from \"../types\";\nimport { ERROR_MSG, ROTATION_MODE } from \"../constants\";\n\nexport function ContinueStartButton(props: {\n  rotationNumberInputed: string;\n  rotationRate: number;\n  rotations: TypeRotation[];\n  clearRotationNumberInputed: Function;\n  setRotations: Function;\n  setIsCorrectBallNumberConfirm: Function;\n}) {\n  // 継続スタート\n  const continueStart = () => {\n    try {\n      if (props.rotationNumberInputed === \"\") {\n        throw ERROR_MSG.rotaionNumberEmpty;\n      }\n\n      props.setIsCorrectBallNumberConfirm(false);\n\n      props.setRotations(\n        props.rotations.concat({\n          type: ROTATION_MODE.continueStart,\n          rotationNumber: Number(props.rotationNumberInputed),\n          rotationRateMostRecent: 0,\n          rotationRate: props.rotationRate,\n        })\n      );\n\n      props.clearRotationNumberInputed();\n    } catch (error) {\n      alert(error);\n    }\n  };\n\n  return (\n    <>\n      <ShrinkNameButton variant=\"primary\" className=\"col-4\" onClick={() => continueStart()}>\n        継続スタート\n      </ShrinkNameButton>{\" \"}\n    </>\n  );\n}\n","import React from \"react\";\nimport { format } from \"date-fns\";\nimport { ShrinkNameButton } from \"../styledComponents/ShrinkNameButton\";\nimport { TypeRotation } from \"../types\";\nimport { ERROR_MSG, ROTATION_MODE } from \"../constants\";\n\nexport function ResetStartButton(props: {\n  rotationNumberInputed: string;\n  rotations: TypeRotation[];\n  selectStoreRef: React.MutableRefObject<HTMLSelectElement>;\n  isResetStarted: Function;\n  clearRotationNumberInputed: Function;\n  setRotations: Function;\n}) {\n  const resetStart = () => {\n    try {\n      if (props.isResetStarted()) {\n        throw ERROR_MSG.resetStartedAlready;\n      }\n      if (props.rotationNumberInputed === \"\") {\n        throw ERROR_MSG.rotaionNumberEmpty;\n      }\n      if (props.selectStoreRef.current.value === \"\") {\n        throw ERROR_MSG.selectStore;\n      }\n\n      props.setRotations(\n        props.rotations.concat({\n          type: ROTATION_MODE.resetStart,\n          rotationNumber: Number(props.rotationNumberInputed),\n          rotationRateMostRecent: 0,\n          rotationRate: 0,\n        })\n      );\n\n      props.clearRotationNumberInputed();\n\n      localStorage.setItem(\"startTime\", format(new Date(), \"HH:mm\"));\n    } catch (error) {\n      alert(error);\n    }\n  };\n\n  return (\n    <>\n      <ShrinkNameButton id=\"resetStartButton\" variant=\"primary\" className=\"col-4\" onClick={() => resetStart()}>\n        リセットスタート\n      </ShrinkNameButton>\n    </>\n  );\n}\n","import React from \"react\";\nimport { Button } from \"react-bootstrap\";\n\nexport function NumberButtons(props: { setRotationNumberInputed: Function; rotationNumberInputed: string }) {\n  const numbers = [\"7\", \"8\", \"9\", \"4\", \"5\", \"6\", \"1\", \"2\", \"3\", \"0\"];\n\n  return (\n    <>\n      {numbers.map((number) => (\n        <Button key={number} variant=\"primary\" className=\"col-4\" onClick={() => props.setRotationNumberInputed(props.rotationNumberInputed + number)}>\n          {number}\n        </Button>\n      ))}\n    </>\n  );\n}\n","import React from \"react\";\nimport { TypeRotation } from \"../types\";\nimport { ROTATION_MODE } from \"../constants\";\nimport { ListGroup } from \"react-bootstrap\";\n\nexport function Rotations(props: { rotations: TypeRotation[] }) {\n  return (\n    <>\n      {props.rotations.map((rotation, index) => {\n        let content = \"\";\n        if (rotation.type === ROTATION_MODE.resetStart) {\n          content = `${rotation.rotationNumber} --start--`;\n        } else if (rotation.type === ROTATION_MODE.continueStart) {\n          content = `${rotation.rotationNumber} > start`;\n        } else if (rotation.type === ROTATION_MODE.normal) {\n          content = `${rotation.rotationNumber} ${rotation.rotationRateMostRecent} ${rotation.rotationRate}`;\n        }\n        return <ListGroup.Item key={index}>{content}</ListGroup.Item>;\n      })}\n    </>\n  );\n}\n","import React from \"react\";\nimport { TypeStoreName } from \"../types\";\nimport { SELECT_STORE_TITLE } from \"../constants\";\n\nexport function StoreNames(props: { storeNames: TypeStoreName[] }) {\n  const $doms = [\n    <option key={\"defaultValue\"} value=\"\" disabled hidden>\n      {SELECT_STORE_TITLE}\n    </option>,\n  ];\n  const $storeNames = props.storeNames.map((store: TypeStoreName) => {\n    return (\n      <option key={store} value={store}>\n        {store}\n      </option>\n    );\n  });\n\n  const $domsConcated = [$doms, ...$storeNames];\n\n  return <>{$domsConcated}</>;\n}\n","import React, { useState, useRef, useEffect, useMemo, useCallback } from \"react\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport { Container, Row, Col, FormControl, Form, Button, ListGroup, InputGroup } from \"react-bootstrap\";\nimport { format } from \"date-fns\";\n// 型定義インポート\nimport { TypeRotation } from \"./types\";\n// 定数定義インポート\nimport {\n  STORE_NAMES,\n  STORE_NAMES_EXCHANGE_RATES_MAP,\n  STORE_NAME_BALL_NUMBER_LENT,\n  EXCHANGE_RATE_NORMAL,\n  REST_URL_SPREADSHEET,\n  REPLENISHMENT_AMOUNT,\n  REPLENISHMENT_AMOUNT_RATIO,\n  ROTATION_MODE,\n  ERROR_MSG,\n} from \"./constants\";\n// 便利系関数インポート\nimport { last, sleep } from \"./utils\";\n// 各コンポーネントをインポート\nimport { ContinueStartButton } from \"./components/ContinueStartButton\";\nimport { ResetStartButton } from \"./components/ResetStartButton\";\nimport { NumberButtons } from \"./components/NumberButtons\";\nimport { Rotations } from \"./components/Rotations\";\nimport { StoreNames } from \"./components/StoreNames\";\n// css modulesインポート\nimport styles from \"./cssModules/App.module.css\";\n\nconst axios = require(\"axios\").default;\n\nfunction App() {\n  // useState定義\n  const [pageIndex, setPageIndex] = useState(0);\n  const [rotationNumberInputed, setRotationNumberInputed] = useState<string>(\"\");\n  const [rotations, setRotations] = useState<TypeRotation[]>([]);\n  const [rotationRate, setRotationRate] = useState(0);\n  const [investmentCnt, setInvestmentCnt] = useState(0);\n  const [rotationNumberTotal, setRotationNumberTotal] = useState(0);\n  const [border, setBorder] = useState<string>(\"\");\n  const [storeName, setStoreName] = useState(\"\");\n  const [machineName, setMachineName] = useState(\"\");\n  const [ballNumberConfirm, setBallNumberConfirm] = useState(\"\");\n  const [ballNumberAutoRotation, setBallNumberAutoRotation] = useState(\"\");\n  const [rotationNumberAutoRotation, setRotationNumberAutoRotation] = useState(\"\");\n  const [remarks, setRemarks] = useState(\"\");\n  const [exchangeRate, setExchangeRate] = useState<string>(\"\");\n  const [isCorrectBallNumberConfirm, setIsCorrectBallNumberConfirm] = useState(true);\n\n  // useRef定義\n  const rotationListRef = useRef<HTMLDivElement>(null);\n  const selectStoreRef = useRef<HTMLSelectElement>(document.createElement(\"select\"));\n  const rotationButtonRef = useRef<HTMLButtonElement>(document.createElement(\"button\"));\n\n  const setItemLocalStorage = useCallback(\n    (keyName: string, setted: string) => {\n      localStorage.setItem(`${keyName}_${pageIndex}`, setted);\n    },\n    [pageIndex]\n  );\n  const getItemLocalStorage = useCallback(\n    (keyName: string, init: string) => {\n      const result = localStorage.getItem(`${keyName}_${pageIndex}`) || init;\n      return result;\n    },\n    [pageIndex]\n  );\n\n  // 初回描画時に実行\n  useEffect(() => {\n    // ローカルストレージから各値を取得。\n    const investmentCntLocal: string = getItemLocalStorage(\"investmentCnt\", \"0\");\n    const rotationsParsed: TypeRotation[] = JSON.parse(getItemLocalStorage(\"rotations\", \"[]\"));\n    const storeNameLocal: string = getItemLocalStorage(\"storeName\", \"\");\n    const machineNameLocal: string = getItemLocalStorage(\"machineName\", \"\");\n    const ballNumberConfirmLocal: string = getItemLocalStorage(\"ballNumberConfirm\", \"\");\n    const borderLocal: string = getItemLocalStorage(\"border\", \"18.0\");\n    const remarksLocal: string = getItemLocalStorage(\"remarks\", \"\");\n\n    setInvestmentCnt(Number(investmentCntLocal));\n    setStoreName(storeNameLocal);\n    setRotations(rotationsParsed);\n    setMachineName(machineNameLocal);\n    setBallNumberConfirm(ballNumberConfirmLocal);\n    setBorder(borderLocal);\n    setRemarks(remarksLocal);\n    setRotationRate(calcRotationRate(rotationsParsed));\n    setRotationNumberTotal(calcRotationNumberTotal(rotationsParsed));\n  }, [getItemLocalStorage]);\n\n  useEffect(() => {\n    (rotationListRef as any).current.scrollTop = (rotationListRef as any).current.scrollHeight;\n    setItemLocalStorage(\"rotations\", JSON.stringify(rotations));\n  }, [rotations, setItemLocalStorage]);\n\n  useEffect(() => {\n    setItemLocalStorage(\"investmentCnt\", \"\" + investmentCnt);\n  }, [investmentCnt, setItemLocalStorage]);\n\n  useEffect(() => {\n    setItemLocalStorage(\"border\", border);\n  }, [border, setItemLocalStorage]);\n\n  useEffect(() => {\n    setItemLocalStorage(\"ballNumberConfirm\", ballNumberConfirm);\n  }, [ballNumberConfirm, setItemLocalStorage]);\n\n  useEffect(() => {\n    setItemLocalStorage(\"remarks\", remarks);\n  }, [remarks, setItemLocalStorage]);\n\n  useEffect(() => {\n    // 選択肢の店名が変更されたら、対応した交換率へ変更する。\n    const storeExchangeRate = STORE_NAMES_EXCHANGE_RATES_MAP.get(storeName);\n    setExchangeRate(String(storeExchangeRate));\n\n    setItemLocalStorage(\"storeName\", storeName);\n  }, [storeName, setItemLocalStorage]);\n\n  // ■useMemo系\n  // 「回転単価」が「ボーダーまたは回転率」に対する「導出項目」のため。\n  const rotationUnitPrice = useMemo<number>(() => {\n    if (rotationRate === 0) return 0;\n    return Number((1000 / Number(border) - 1000 / rotationRate).toFixed(1));\n  }, [border, rotationRate]);\n\n  // ■change系\n  function changeStoreNamesSelect(event: React.ChangeEvent<HTMLInputElement>) {\n    setStoreName(event.target.value);\n  }\n\n  function changeBorder(event: React.ChangeEvent<HTMLInputElement>) {\n    setBorder(event.target.value);\n  }\n\n  // 機種名の変更\n  function changeMachineName(event: React.ChangeEvent<HTMLInputElement>) {\n    const machineName = event.target.value;\n    setMachineName(machineName);\n    setItemLocalStorage(\"machineName\", machineName);\n  }\n\n  // 備考の変更\n  function changeRemarks(event: React.ChangeEvent<HTMLInputElement>) {\n    const remarksInputed = event.target.value;\n    setRemarks(remarksInputed);\n  }\n\n  // 回転数入力ミス防止用玉数の変更\n  function changeBallNumberConfirm(event: React.ChangeEvent<HTMLInputElement>) {\n    const ballNumberConfirm = event.target.value;\n    setBallNumberConfirm(ballNumberConfirm);\n  }\n\n  // 自動回転に使用する玉数\n  function changeBallNumberAutoRotation(event: React.ChangeEvent<HTMLInputElement>) {\n    const ballNumberAutoRotation = event.target.value;\n    setBallNumberAutoRotation(ballNumberAutoRotation);\n  }\n\n  // 自動回転に使用する回転数\n  function changeRotationNumberAutoRotation(event: React.ChangeEvent<HTMLInputElement>) {\n    const rotationNumberAutoRotation = event.target.value;\n    setRotationNumberAutoRotation(rotationNumberAutoRotation);\n  }\n\n  function changeRotationNumberInputed(event: React.ChangeEvent<HTMLInputElement>) {\n    setRotationNumberInputed(event.target.value);\n  }\n\n  // ■通常関数定義\n  function isResetStarted() {\n    return rotations.length > 0 && rotations[0].type === ROTATION_MODE.resetStart;\n  }\n\n  function clearRotationNumberInputed() {\n    setRotationNumberInputed(\"\");\n  }\n\n  function getWorkAmount() {\n    return (rotationUnitPrice * rotationNumberTotal).toFixed(0);\n  }\n\n  // 一回の貸出ボタン玉数\n  function getBallNumberLent(storeName: string): number {\n    const ballNumberLentDefault = 125;\n    try {\n      if (!STORE_NAME_BALL_NUMBER_LENT.hasOwnProperty(storeName)) {\n        throw new Error(ERROR_MSG.notExpectedStoreName);\n      }\n      return STORE_NAME_BALL_NUMBER_LENT[storeName];\n    } catch (error) {\n      alert(error);\n      return ballNumberLentDefault;\n    }\n  }\n\n  // 前のページへ移動\n  function toPrevPage() {\n    setPageIndex(pageIndex - 1);\n  }\n  // 次のページへ移動\n  function toNextPage() {\n    setPageIndex(pageIndex + 1);\n  }\n\n  //　回転配列を1行削除する。\n  function deleteOneRotation() {\n    const rotationsLength = rotations.length;\n\n    if (rotationsLength === 0) return;\n\n    // 削除時は、一律で正しいことにする。\n    setIsCorrectBallNumberConfirm(true);\n\n    // 投資回数の調整\n    if (last(rotations).type === ROTATION_MODE.normal) {\n      setInvestmentCnt(investmentCnt - 1);\n    }\n\n    const rotationsDeleted = rotations.filter((rotation, index) => {\n      return index !== rotationsLength - 1;\n    });\n\n    // 回転率の更新\n    // 長さが1の時、必ずリセットスタートなので、回転率は0に設定してあります。\n    if (rotationsDeleted.length === 1 || rotationsDeleted.length === 0) {\n      setRotationRate(0);\n    } else {\n      setRotationRate(last(rotationsDeleted).rotationRate);\n    }\n\n    // 総回転数の更新\n    if (last(rotations).type === ROTATION_MODE.normal && rotationsDeleted.length > 0) {\n      const rotationNumberDiffShouldSub = last(rotations).rotationNumber - last(rotationsDeleted).rotationNumber;\n      setRotationNumberTotal(rotationNumberTotal - rotationNumberDiffShouldSub);\n    }\n\n    setRotations(rotationsDeleted);\n\n    // 確認用玉数を計算\n    setBallNumberConfirm(String(Number(ballNumberConfirm) + getBallNumberLent(storeName)));\n  }\n\n  // 画面の初期読込時に使用\n  function calcRotationNumberTotal(rotations: TypeRotation[]) {\n    let totalRotationNumberCalculatted = 0;\n    rotations.forEach((rotation, idx) => {\n      if (rotation.type === ROTATION_MODE.resetStart || rotation.type === ROTATION_MODE.continueStart) return;\n      totalRotationNumberCalculatted += rotation.rotationNumber - rotations[idx - 1].rotationNumber;\n    });\n    return totalRotationNumberCalculatted;\n  }\n\n  // 画面の初期読込時に使用\n  function calcRotationRate(rotations: TypeRotation[]) {\n    if (rotations.length === 0) return 0;\n    return last(rotations).rotationRate;\n  }\n\n  function deleteAllRotation() {\n    if (window.confirm(\"全行削除してもいいですか？\")) {\n      setRotations([]);\n      setRotationRate(0);\n      setInvestmentCnt(0);\n      setRotationNumberTotal(0);\n      setBallNumberConfirm(\"\");\n      setMachineName(\"\");\n      setRemarks(\"\");\n    }\n  }\n\n  // 最後の結果書込処理（全行削除も行う）\n  function writeWorkResultAndDeleteAllRotation() {\n    const now = new Date();\n    const date = format(now, \"yyyy/MM/dd\");\n    const timeStart = localStorage.getItem(\"startTime\");\n    const timeEnd = format(now, \"HH:mm\");\n\n    const params = new URLSearchParams();\n    params.append(\"date\", `${date}`);\n    params.append(\"timeStart\", `${timeStart}`);\n    params.append(\"timeEnd\", `${timeEnd}`);\n    params.append(\"border\", `${border}`);\n    params.append(\"rotationRate\", `${rotationRate}`);\n    params.append(\"rotationUnitPrice\", `${rotationUnitPrice}`);\n    params.append(\"rotationNumberTotal\", `${rotationNumberTotal}`);\n    params.append(\"workAmount\", `${getWorkAmount()}`);\n    params.append(\"machineName\", `${machineName}`);\n    params.append(\"storeName\", `${storeName}`);\n    params.append(\"remarks\", `${remarks}`);\n\n    axios\n      .post(REST_URL_SPREADSHEET, params)\n      .then(function (response: any) {\n        alert(\"書込が成功しました。\");\n        deleteAllRotation();\n      })\n      .catch(function (error: any) {\n        alert(error);\n      });\n  }\n\n  // 回転数の短縮入力の判別（返り値は、回転数）\n  function shouldShortInput() {\n    return String(rotationNumberInputed).length < 3 && String(last(rotations).rotationNumber).length > 1;\n  }\n\n  // 短縮入力された「回転数を返す」\n  function getRotationNumberShortInputed(): number {\n    const digitsHowMuch = 2;\n    const rotationNumberLast: string = String(last(rotations).rotationNumber);\n    const isMoveUp = (beCompared: number, rotationNumberInputed: number) => beCompared > rotationNumberInputed;\n    const createBefore = (): number => {\n      // 分解パート\n      const numberBeMovedUpIfNeed = Number(rotationNumberLast.slice(0, -digitsHowMuch));\n      const numberBeCompared = Number(rotationNumberLast.slice(-digitsHowMuch));\n      // 「比較パート」と「繰上げパート」\n      const before = isMoveUp(numberBeCompared, Number(rotationNumberInputed)) ? numberBeMovedUpIfNeed + 1 : numberBeMovedUpIfNeed;\n\n      return before;\n    };\n\n    const before = createBefore();\n    const after = (\"00\" + rotationNumberInputed).slice(-digitsHowMuch);\n    // 連結パート\n    return Number(before + after);\n  }\n\n  // 自動回転\n  async function autoRotation() {\n    // 回転ボタンを非同期でクリックするために作成。\n    const clickRotation = () => {\n      return sleep(1).then(() => rotationButtonRef.current.click());\n    };\n\n    // 玉数の差から投資回数を算出\n    const diffBallNumber = Number(ballNumberConfirm) - Number(ballNumberAutoRotation);\n    const countInvestment = diffBallNumber / getBallNumberLent(storeName);\n    // 丁度いい回転数を自動入力するために算出\n    const diffRotationNumber = Number(rotationNumberAutoRotation) - last(rotations).rotationNumber;\n    // 厳密にやらずに、小数点は無視します。\n    const rotationNumberPerInvestment = Math.floor(diffRotationNumber / countInvestment);\n    // 投資回数が整数でない場合は、考えないことにしています。\n    if (!Number.isInteger(countInvestment)) {\n      alert(\"投資回数が整数ではありません。\");\n      return;\n    }\n    // 投資回数分、回転数を自動入力していきます。\n    for (let index = 0; index < countInvestment; index++) {\n      const rotationNumber = Number(rotationNumberAutoRotation) - rotationNumberPerInvestment * (countInvestment - 1 - index);\n      setRotationNumberInputed(String(rotationNumber));\n      await clickRotation();\n    }\n  }\n\n  // 通常回転（回転ボタン押下時の処理）\n  function rotation() {\n    try {\n      if (isResetStarted() === false) {\n        throw ERROR_MSG.resetStart;\n      }\n      // 以下の場合に、「確認用玉数チェック」をfalseにする。\n      // マイナスに突入しそうな場合、未入力の場合（Numberで変換すると0になるので特別記入しなくていい）\n      if (Number(ballNumberConfirm) < getBallNumberLent(storeName)) {\n        setIsCorrectBallNumberConfirm(false);\n      } else {\n        setIsCorrectBallNumberConfirm(true);\n      }\n\n      // 投資回数の計算\n      const investmentCntNow = investmentCnt + 1;\n      // 必要であれば短縮入力を効かせる。\n      const rotationNumberInputedClone = shouldShortInput() ? getRotationNumberShortInputed() : Number(rotationNumberInputed);\n      const rotationNumberDiffFromLast = Number(rotationNumberInputedClone) - last(rotations).rotationNumber;\n      //　交換率の比：通常交換率'4'と実交換率の比。回転率計算に用いる。\n      const exchangeRateRatio: number = Number(exchangeRate) / EXCHANGE_RATE_NORMAL;\n      const rotationRateMostRecent = Number((rotationNumberDiffFromLast * REPLENISHMENT_AMOUNT_RATIO * exchangeRateRatio).toFixed(1));\n\n      const rotationNumberTotalNow = rotationNumberTotal + rotationNumberDiffFromLast;\n\n      // 投資金額の比（todo:もう少し分かりやすく出来るかも？）\n      const investmentAmountRatio = 1000 / (REPLENISHMENT_AMOUNT * investmentCntNow);\n      const rotationRateNow = Number((rotationNumberTotalNow * investmentAmountRatio * exchangeRateRatio).toFixed(1));\n\n      clearRotationNumberInputed();\n\n      // 各種set\n      setInvestmentCnt(investmentCntNow);\n      setRotationNumberTotal(rotationNumberTotalNow);\n      setRotationRate(rotationRateNow);\n      setRotations(\n        rotations.concat({\n          type: ROTATION_MODE.normal,\n          rotationNumber: Number(rotationNumberInputedClone),\n          rotationRateMostRecent,\n          rotationRate: rotationRateNow,\n        })\n      );\n      // 確認用玉数を計算\n      setBallNumberConfirm(String(Number(ballNumberConfirm) - getBallNumberLent(storeName)));\n    } catch (error) {\n      alert(error);\n    }\n  }\n\n  return (\n    <div className=\"App\">\n      <Container className={`pt-3 ${isCorrectBallNumberConfirm ? \"\" : styles.bg_warning}`}>\n        <Row>\n          <Col>\n            <p className=\"mb-0\">\n              <span>{rotationUnitPrice}</span> * <span>{rotationNumberTotal}</span> = <span data-testid=\"work-amount\">{getWorkAmount()}</span>\n            </p>\n\n            <Row className=\"justify-content-between\">\n              <Button className=\"mb-1\" variant=\"primary\" onClick={() => deleteOneRotation()}>\n                1行削除\n              </Button>\n              <Button className=\"mb-1\" variant=\"primary\" onClick={() => toPrevPage()}>\n                前\n              </Button>\n              <Button className=\"mb-1\" variant=\"primary\" onClick={() => toNextPage()}>\n                次\n              </Button>\n            </Row>\n\n            <FormControl\n              className=\"mb-1\"\n              id=\"rotationNumberInput\"\n              value={rotationNumberInputed}\n              onChange={changeRotationNumberInputed}\n              placeholder=\"回転数入力\"\n            />\n\n            <Row className=\"mb-2\">\n              <NumberButtons setRotationNumberInputed={setRotationNumberInputed} rotationNumberInputed={rotationNumberInputed} />\n              <Button variant=\"primary\" className=\"col-4\" onClick={() => clearRotationNumberInputed()}>\n                C\n              </Button>\n              <Button variant=\"primary\" className=\"col-4\"></Button>\n\n              <Button variant=\"primary\" className=\"col-4 py-3\" ref={rotationButtonRef} onClick={() => rotation()}>\n                回転\n              </Button>\n\n              <ContinueStartButton\n                rotationNumberInputed={rotationNumberInputed}\n                rotationRate={rotationRate}\n                rotations={rotations}\n                clearRotationNumberInputed={clearRotationNumberInputed}\n                setRotations={setRotations}\n                setIsCorrectBallNumberConfirm={setIsCorrectBallNumberConfirm}\n              />\n\n              <ResetStartButton\n                rotationNumberInputed={rotationNumberInputed}\n                rotations={rotations}\n                selectStoreRef={selectStoreRef}\n                isResetStarted={isResetStarted}\n                clearRotationNumberInputed={clearRotationNumberInputed}\n                setRotations={setRotations}\n              />\n            </Row>\n\n            <Row>\n              <InputGroup size=\"sm\">\n                <InputGroup.Prepend>\n                  <InputGroup.Text>確認用玉数</InputGroup.Text>\n                </InputGroup.Prepend>\n                <FormControl value={ballNumberConfirm} data-testid=\"ball-number-confirm\" onChange={changeBallNumberConfirm} type=\"number\" />\n              </InputGroup>\n            </Row>\n            <Row>\n              <InputGroup size=\"sm\">\n                <FormControl\n                  value={ballNumberAutoRotation}\n                  data-testid=\"ball-number-auto-rotation\"\n                  onChange={changeBallNumberAutoRotation}\n                  type=\"number\"\n                  placeholder=\"玉数\"\n                />\n                <FormControl\n                  value={rotationNumberAutoRotation}\n                  data-testid=\"ball-number-auto-rotation\"\n                  onChange={changeRotationNumberAutoRotation}\n                  type=\"number\"\n                  placeholder=\"回転数\"\n                />\n                <InputGroup.Append>\n                  <Button variant=\"outline-primary\" onClick={() => autoRotation()}>\n                    自回\n                  </Button>\n                </InputGroup.Append>\n              </InputGroup>\n            </Row>\n            <Row>\n              <InputGroup size=\"sm\">\n                <InputGroup.Prepend>\n                  <InputGroup.Text>ボーダー</InputGroup.Text>\n                </InputGroup.Prepend>\n                <FormControl value={border} data-testid=\"border\" onChange={changeBorder} type=\"number\" />\n              </InputGroup>\n            </Row>\n            <Row>\n              <InputGroup size=\"sm\">\n                <InputGroup.Prepend>\n                  <InputGroup.Text>店名</InputGroup.Text>\n                </InputGroup.Prepend>\n                <Form.Control as=\"select\" value={storeName} onChange={changeStoreNamesSelect} ref={selectStoreRef}>\n                  <StoreNames storeNames={STORE_NAMES} />\n                </Form.Control>\n              </InputGroup>\n            </Row>\n            <Row>\n              <InputGroup size=\"sm\">\n                <InputGroup.Prepend>\n                  <InputGroup.Text>機種名</InputGroup.Text>\n                </InputGroup.Prepend>\n                <FormControl value={machineName} onChange={changeMachineName} />\n              </InputGroup>\n            </Row>\n            <Row>\n              <InputGroup size=\"sm\">\n                <InputGroup.Prepend>\n                  <InputGroup.Text>備考</InputGroup.Text>\n                </InputGroup.Prepend>\n                <Form.Control as=\"textarea\" rows={2} value={remarks} onChange={changeRemarks} />\n              </InputGroup>\n            </Row>\n            <Row>\n              <div className=\"mr-2\">交換率:</div>\n              <div>{exchangeRate}</div>\n            </Row>\n            <Row>\n              <Button className=\"mt-5\" variant=\"primary\" onClick={() => writeWorkResultAndDeleteAllRotation()}>\n                表書込＆全削\n              </Button>\n            </Row>\n\n            <Row>\n              <Button className=\"allDeteleBtn\" variant=\"primary\" onClick={() => deleteAllRotation()}>\n                全行削除\n              </Button>\n            </Row>\n          </Col>\n          <Col>\n            <ListGroup className=\"rotationList\" ref={rotationListRef}>\n              <Rotations rotations={rotations} />\n            </ListGroup>\n          </Col>\n        </Row>\n      </Container>\n    </div>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}